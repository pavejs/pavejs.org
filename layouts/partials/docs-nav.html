<nav>
  {{- $url := split .Permalink "/" -}}
  {{- $page_slug := index $url (sub (len $url) 2) -}}
  <ul class="list-none mb-0 py-3 md:pt-1">
  {{- range $group := .Site.Data.sidebar -}}
    {{- $link := $group.title -}}
    {{- $link_slug := $link | urlize -}}
    {{- if $group.content -}}
      {{- $link = index $group.content 0 -}}
      {{- $link_slug = $link.title | urlize -}}
    {{- end -}}
    {{- $group_slug := $group.title | urlize -}}
    {{- $is_active_group := eq $.Page.Params.group $group_slug -}}
    {{- if $group.content }}
      <li class="mb-1">
        <button class="inline-flex items-center rounded{{ if not $is_active_group }} collapsed{{ end }}">
          {{ $group.title }}
        </button>
        <div class="hidden{{ if $is_active_group }} flex{{ end }}">
          <ul class="list-none text-base pb-1">
            {{- range $section := $group.content -}}
              {{- $section_slug := $section.title | urlize -}}
              {{- $is_active := and $is_active_group (eq $page_slug $section_slug) -}}
              {{- $href := printf "/docs/%s/%s/%s/" $group_slug $section_slug }}
              <li><a href="{{ $href }}" class="inline-flex items-center rounded{{ if $is_active }} text-gray-800{{ end }}">
                {{ $section.title }}
              </a></li>
            {{- end }}
          </ul>
        </div>
      </li>
    {{- else }}
      <li class="my-3 mx-4 border-t"></li>
      <li><a href="/docs/{{ $group_slug }}/" class="inline-flex items-center rounded{{ if $is_active_group }} text-gray-800{{ end }}">
        {{ $group.title }}
      </a></li>
    {{- end }}
  {{- end }}
  </ul>
</nav>