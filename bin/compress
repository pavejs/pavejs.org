#!/bin/sh -e

# Use brotli and gzip to compress files within the dist dir ending in ['css', 'html', 'ico', 'js', 'json', 'svg', 'webmanifest']
exec find dist \
  \( \
    -name '*.css' \
    -o -name '*.html' \
    -o -name '*.ico' \
    -o -name '*.js' \
    -o -name '*.json' \
    -o -name '*.svg' \
    -o -name '*.webmanifest' \
  \) \
  -exec echo Compressing {}... \; \
  -exec brotli -fZ {} \; \
  -exec gzip -9fk {} \;